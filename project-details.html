<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Details</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        .btn-back-custom {
        position: relative;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.6rem 1.5rem;
        border-radius: 9999px; /* شكل بيضاوي كامل */
        font-weight: 600;
        font-size: 0.9rem;
        color: #c9d1d9;
        background: rgba(255, 255, 255, 0.03); /* خلفية شفافة */
        border: 1px solid rgba(1, 181, 248, 0.3); /* حدود زرقاء خفيفة */
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        overflow: hidden;
        text-decoration: none;
    }

    /* تأثير الهوفر: لون أزرق وتوهج */
    .btn-back-custom:hover {
        background: #01b5f8;
        color: white;
        border-color: #01b5f8;
        box-shadow: 0 0 20px rgba(1, 181, 248, 0.4);
        transform: translateY(-2px);
    }

    /* حركة السهم عند الهوفر */
    .btn-back-custom svg {
        transition: transform 0.3s ease;
    }
    .btn-back-custom:hover svg {
        transform: translateX(-3px); /* السهم يتحرك للشمال */
    }
        :root { --color-primary: #01b5f8; --color-dark: #0a0f18; }
        body { background-color: var(--color-dark); color: #c9d1d9; font-family: 'Inter', sans-serif; overflow-x: hidden; }
        ::selection { background: var(--color-primary); color: white; }
        
        /* === Canvas Styling === */
        #particle-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            display: block;
        }
        
        /* === Navbar Active State === */
        .nav-link { position: relative; color: #94a3b8; transition: color 0.3s; font-size: 0.95rem; font-weight: 500; padding-bottom: 4px; }
        .nav-link:hover { color: white; }
        
        /* الخط المتحرك تحت الروابط */
        .nav-link::after { content: ''; position: absolute; width: 0; height: 2px; bottom: 0; left: 0; background-color: var(--color-primary); transition: width 0.3s ease-in-out; }
        .nav-link:hover::after { width: 100%; }

        /* الحالة النشطة (Active) مثل الصورة */
        .nav-link.active { color: white; }
        .nav-link.active::after { width: 100%; box-shadow: 0 0 10px var(--color-primary); }

        /* === Icon Animations === */
        @keyframes floatIcon { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
        @keyframes pulseIcon { 0%, 100% { opacity: 1; transform: scale(1); } 50% { opacity: 0.8; transform: scale(1.1); } }
        
        .icon-animate-float { animation: floatIcon 3s ease-in-out infinite; }
        .icon-animate-pulse { animation: pulseIcon 2s ease-in-out infinite; }

        /* === Components === */
        .glass-card {
            background: rgba(30, 41, 59, 0.4); backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05); border-radius: 1rem;
            transition: all 0.4s ease; position: relative; overflow: hidden;
        }
        .glass-card:hover { 
            border-color: rgba(1, 181, 248, 0.4); transform: translateY(-5px); 
            box-shadow: 0 15px 35px -10px rgba(1, 181, 248, 0.15);
        }

        /* Hero Image */
        .img-container {
            position: relative; overflow: hidden; border-radius: 1rem; 
            border: 1px solid rgba(255, 255, 255, 0.1); transition: all 0.5s ease;
        }
        .img-container img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.7s ease; }
        .img-container:hover { border-color: var(--color-primary); box-shadow: 0 0 25px rgba(1, 181, 248, 0.25); }
        .img-container:hover img { transform: scale(1.1); }

        /* Screenshot Button */
        .screenshot-overlay {
            position: absolute; inset: 0; background: rgba(10, 15, 24, 0.7); backdrop-filter: blur(2px);
            display: flex; justify-content: center; align-items: center; opacity: 0; transition: all 0.3s ease;
        }
        .img-container:hover .screenshot-overlay { opacity: 1; }
        
        .screenshot-btn {
            background: var(--color-primary); color: white; padding: 0.5rem 1.2rem; border-radius: 9999px;
            font-weight: 600; font-size: 0.85rem; display: flex; align-items: center; gap: 0.5rem;
            transform: translateY(20px); opacity: 0; transition: all 0.4s ease;
            box-shadow: 0 4px 15px rgba(1, 181, 248, 0.4);
        }
        .img-container:hover .screenshot-btn { transform: translateY(0); opacity: 1; }
        .screenshot-btn:hover { background: white; color: var(--color-primary); transform: scale(1.05); }

        /* Chips & Features */
        .tech-chip { 
            padding: 0.4rem 0.9rem; background: rgba(1, 181, 248, 0.08); color: var(--color-primary); 
            border: 1px solid rgba(1, 181, 248, 0.15); border-radius: 8px; font-size: 0.8rem; font-weight: 600;
            transition: all 0.3s ease; display: inline-block; margin: 0.2rem;
        }
        .tech-chip:hover { background: var(--color-primary); color: white; transform: translateY(-2px); }

        .feature-item { display: flex; align-items: flex-start; gap: 0.75rem; padding: 0.75rem; border-radius: 0.75rem; transition: all 0.3s ease; }
        .feature-item:hover { background: rgba(255, 255, 255, 0.03); transform: translateX(5px); }

        /* Animation Classes */
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in-up { animation: fadeInUp 0.7s ease-out forwards; opacity: 0; }
        .delay-100 { animation-delay: 0.1s; } .delay-200 { animation-delay: 0.2s; } .delay-300 { animation-delay: 0.3s; }
        
        .bg-effects { position: fixed; inset: 0; z-index: 2; pointer-events: none; overflow: hidden; width: 100%; height: 100%; }
        .radial { position: absolute; border-radius: 50%; filter: blur(90px); opacity: 0.15; }
        .r1 { top: -20%; right: -10%; width: 600px; height: 600px; background: radial-gradient(circle, var(--color-primary), transparent 60%); animation: float-blob 8s ease-in-out infinite; }
        .r2 { bottom: -20%; left: -10%; width: 500px; height: 500px; background: radial-gradient(circle, #02569B, transparent 60%); animation: float-blob 10s ease-in-out infinite reverse; }
        
        @keyframes float-blob {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(30px, -30px); }
        }
    </style>
</head>
<body>
    <canvas id="particle-canvas"></canvas>

    <div id="preloader" class="fixed inset-0 z-50 flex justify-center items-center bg-[#0a0f18] transition-opacity duration-300">
        <div class="w-12 h-12 border-4 border-blue-500/20 border-t-blue-500 rounded-full animate-spin"></div>
    </div>

    <div class="bg-effects"><div class="radial r1"></div><div class="radial r2"></div></div>

    <header class="fixed top-0 left-0 right-0 z-50 bg-[#0a0f18]/80 backdrop-blur-md border-b border-white/5">
    <div class="container mx-auto max-w-6xl px-6 h-16 flex items-center justify-between">
        
        <a href="index.html" onclick="navigateHome(event)" class="flex items-center gap-2 group">
            <svg class="w-8 h-8 group-hover:rotate-12 transition-transform duration-300" viewBox="0 0 128 128" fill="none">
                <path d="M78.042 128 32.22 82.178 12.012 102.388 0 90.375 32.22 58.155 12.012 37.945 32.22 17.735 78.042 63.558l17.735-17.735L128 14.265 90.375 0 32.22 58.155 78.042 104 90.375 116.333l-12.333 11.667z" fill="#01b5f8"/>
                <path d="m78.042 104 37.625-37.625L90.375 41.083 78.042 53.417 32.22 9.625 19.833 22.012l58.209 58.21 17.735-17.735L128 90.375 90.375 128 78.042 115.667v-11.667z" fill="#02569B"/>
            </svg>
        </a>

        <nav class="hidden md:flex items-center gap-8">
            <a href="index.html#home" onclick="navigateHome(event, '#home')" class="nav-link">Home</a>
            <a href="index.html#about" onclick="navigateHome(event, '#about')" class="nav-link">About</a>
            <a href="index.html#skills" onclick="navigateHome(event, '#skills')" class="nav-link">Skills</a>
            <a href="index.html#work" onclick="navigateHome(event, '#work')" class="nav-link active">Projects</a>
            <a href="index.html#experience" onclick="navigateHome(event, '#experience')" class="nav-link">Experience</a>
            <a href="index.html#contact" onclick="navigateHome(event, '#contact')" class="nav-link">Contact</a>
        </nav>

        <a href="index.html" onclick="navigateHome(event)" class="btn-back-custom group">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
            </svg>
            <span>Back Home</span>
        </a>
    </div>
</header>

    <main class="pt-28 pb-16 px-6 min-h-screen relative z-20">
        
        <section class="container mx-auto max-w-6xl mb-16 animate-fade-in-up">
            <div class="grid md:grid-cols-2 gap-10 items-center">
                <div class="order-2 md:order-1">
                    <h1 id="details-title" class="text-4xl md:text-5xl font-bold text-white mb-4 leading-tight">Loading...</h1>
                    <p id="details-subtitle" class="text-lg text-gray-400 mb-8 font-light leading-relaxed">Please wait...</p>
                    <div id="details-links" class="flex flex-wrap gap-3"></div>
                </div>
                
                <div class="order-1 md:order-2 relative group animate-fade-in-up delay-100">
                    <div class="p-2 bg-white/5 border border-white/10 rounded-2xl backdrop-blur-md relative z-10 img-container h-[320px]">
                        <img id="details-cover" src="" alt="Cover">
                        <div class="screenshot-overlay">
                            <span class="screenshot-btn">
                                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                                Screenshot
                            </span>
                        </div>
                    </div>
                    <div class="absolute inset-0 bg-[#01b5f8] blur-[80px] opacity-20 z-0 group-hover:opacity-40 transition-opacity duration-500"></div>
                </div>
            </div>
        </section>

        <section class="container mx-auto max-w-6xl mb-16 animate-fade-in-up delay-200">
            <div class="grid md:grid-cols-3 gap-8">
                
                <div class="md:col-span-2 space-y-8">
                    <div class="glass-card p-8">
                        <h2 class="text-xl font-bold text-white mb-4 flex items-center gap-3">
                            <span class="p-2 rounded-lg bg-[#01b5f8]/10 text-[#01b5f8] icon-animate-pulse">
                                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                            </span>
                            About This Project
                        </h2>
                        <p id="details-about" class="text-gray-300 leading-relaxed text-base"></p>
                    </div>

                    <div class="glass-card p-8">
                        <h2 class="text-xl font-bold text-white mb-6 flex items-center gap-3">
                            <span class="p-2 rounded-lg bg-[#01b5f8]/10 text-[#01b5f8] icon-animate-float">
                                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg>
                            </span>
                            Key Features
                        </h2>
                        <div id="details-features" class="grid sm:grid-cols-1 gap-3"></div>
                    </div>
                </div>

                <div class="md:col-span-1">
                    <div class="glass-card p-8 h-full">
                        <h2 class="text-xl font-bold text-white mb-6 flex items-center gap-3">
                            <span class="p-2 rounded-lg bg-[#01b5f8]/10 text-[#01b5f8] icon-animate-pulse">
                                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" /></svg>
                            </span>
                            Technologies Used
                        </h2>
                        <div id="details-tags" class="flex flex-wrap gap-2"></div>
                    </div>
                </div>
            </div>
        </section>

        <section class="container mx-auto max-w-6xl mb-16 animate-fade-in-up delay-300">
            <div class="flex items-center gap-4 mb-8">
                <div class="h-px bg-white/10 flex-grow"></div>
                <h2 class="text-2xl font-bold text-white whitespace-nowrap flex items-center gap-3">
                    <span class="text-[#01b5f8] icon-animate-float">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                    </span>
                    Project Gallery
                </h2>
                <div class="h-px bg-white/10 flex-grow"></div>
            </div>
            
            <div id="details-gallery" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
        </section>
    </main>

    <div id="img-modal" class="fixed inset-0 z-[10000] bg-[#0a0f18]/95 hidden items-center justify-center p-4 backdrop-blur-sm opacity-0 transition-opacity duration-300" onclick="closeModal()">
        <img id="modal-image" src="" class="max-w-[95vw] max-h-[90vh] rounded-xl shadow-2xl border border-white/10 transform scale-95 transition-transform duration-300">
        <button class="absolute top-4 right-4 text-white hover:text-[#01b5f8] bg-white/10 p-2 rounded-full hover:bg-white/20 transition-all">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
        </button>
    </div>

    <script type="module">
        import { getProjects } from './src/shared/data/projects-data.js';

        window.goBackHome = (e) => { e.preventDefault(); sessionStorage.setItem('skipPreloader', 'true'); window.location.href = 'index.html'; };

        document.addEventListener('DOMContentLoaded', async () => {
            const preloader = document.getElementById('preloader');
            setTimeout(() => { preloader.style.opacity = '0'; setTimeout(() => preloader.style.display = 'none', 300); }, 300);

            const urlParams = new URLSearchParams(window.location.search);
            const projectId = parseInt(urlParams.get('id'));
            const projects = await getProjects();
            const project = projects.find(p => p.id === projectId);

            if (project) {
                document.title = `${project.title} | Details`;
                document.getElementById('details-title').textContent = project.title;
                document.getElementById('details-subtitle').textContent = project.shortDescription;
                document.getElementById('details-cover').src = project.coverImage;

                const linksContainer = document.getElementById('details-links');
                const btnClass = "flex items-center gap-2 px-5 py-2.5 rounded-lg text-sm font-bold transition-all duration-300 transform hover:-translate-y-1 shadow-lg";
                if (project.liveUrl) linksContainer.innerHTML += `<a href="${project.liveUrl}" target="_blank" class="${btnClass} bg-[#01b5f8] text-white hover:bg-[#0288d1] shadow-blue-500/20">Live Demo ↗</a>`;
                if (project.githubUrl) linksContainer.innerHTML += `<a href="${project.githubUrl}" target="_blank" class="${btnClass} border border-white/20 text-white hover:bg-white/10 hover:border-white">GitHub</a>`;

                document.getElementById('details-about').textContent = project.shortDescription;

                const featuresContainer = document.getElementById('details-features');
                if (Array.isArray(project.longDescription)) {
                    featuresContainer.innerHTML = project.longDescription.map(feature => 
                        `<div class="feature-item">
                            <span class="mt-1.5 w-1.5 h-1.5 bg-[#01b5f8] rounded-full shrink-0 shadow-[0_0_10px_#01b5f8]"></span>
                            <p class="text-gray-300 text-sm leading-relaxed">${feature}</p>
                        </div>`
                    ).join('');
                } else {
                    featuresContainer.innerHTML = `<p class="text-gray-400">No features listed.</p>`;
                }
                
                if (project.tags) document.getElementById('details-tags').innerHTML = project.tags.map(t => `<span class="tech-chip">${t}</span>`).join('');

                const gallery = document.getElementById('details-gallery');
                const images = (project.detailImages && project.detailImages.length) ? project.detailImages : [project.coverImage];
                gallery.innerHTML = images.map(img => `
                    <div class="img-container h-[200px]" onclick="openModal('${img}')">
                        <img src="${img}" alt="Screenshot">
                        <div class="screenshot-overlay">
                            <button class="screenshot-btn">
                                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                                Screenshot
                            </button>
                        </div>
                    </div>`).join('');
            } else {
                document.getElementById('details-title').textContent = "Project Not Found";
            }
        });

        window.openModal = (src) => { 
            const modal = document.getElementById('img-modal'); const img = document.getElementById('modal-image');
            img.src = src; modal.classList.remove('hidden'); setTimeout(() => { modal.classList.remove('opacity-0'); img.classList.remove('scale-95'); }, 10);
        }
        window.closeModal = () => { 
            const modal = document.getElementById('img-modal'); const img = document.getElementById('modal-image');
            modal.classList.add('opacity-0'); img.classList.add('scale-95'); setTimeout(() => modal.classList.add('hidden'), 300);
        }

        // === Particles Animation ===
        const canvas = document.getElementById('particle-canvas');
        if (!canvas) console.error('Canvas not found!');
        const ctx = canvas.getContext('2d');
        
        // Set canvas to fill entire window
        const resizeCanvas = () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        };
        resizeCanvas();
        
        let particles = [];
        const particleCount = 60;
        
        class Particle {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.size = Math.random() * 2 + 0.5;
                this.speedX = (Math.random() - 0.5) * 0.5;
                this.speedY = (Math.random() - 0.5) * 0.5;
                this.color = Math.random() > 0.7 ? '#01b5f8' : '#02569B';
                this.opacity = Math.random() * 0.5 + 0.2;
            }
            
            update() {
                this.x += this.speedX;
                this.y += this.speedY;
                
                if (this.x > canvas.width) this.x = 0;
                if (this.x < 0) this.x = canvas.width;
                if (this.y > canvas.height) this.y = 0;
                if (this.y < 0) this.y = canvas.height;
            }
            
            draw() {
                ctx.fillStyle = this.color;
                ctx.globalAlpha = this.opacity;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }
        
        for (let i = 0; i < particleCount; i++) {
            particles.push(new Particle());
        }
        
        function animate() {
            ctx.globalAlpha = 1;
            ctx.fillStyle = '#0a0f18';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            particles.forEach(particle => {
                particle.update();
                particle.draw();
            });
            
            requestAnimationFrame(animate);
        }
        
        animate();
        
        window.addEventListener('resize', resizeCanvas);
        
    </script>
</body>
</html>